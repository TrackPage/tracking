'use strict';mix_d("P13NAmazonBusinessFrontEndCards__p13n-deal-info:p13n-deal-info__RLn6uaas","exports tslib @c/scoped-dom @c/aui-carousel @c/dom @c/remote-operations @p/A @p/a-carousel-framework @c/logger @c/aui-utils @c/aui-untrusted-ajax".split(" "),function(t,h,w,x,y,z,A,B,C,M,N){function d(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var p=d(w),D=d(x),E=d(z),k=d(A),F=d(B),m=d(C),u=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
v=/[^\/\-\[\]():\s]/,G=function(a){var b=k["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var l=parseInt(a.getAttribute("data-rows")||"2",10),f=function(){var b=a.innerHTML;a.innerHTML="&hellip;";var c=a.clientHeight;a.innerHTML=b;return c}();if(l){if(f){var g=function(a){b.innerHTML=a;return Math.round(b.clientHeight/f)<=l},c=function(c,l){c=c.split(l);var e=Math.floor(a.clientWidth/12),g=function(c){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";
b.textContent=c;a.appendChild(b);c=a.clientWidth>=a.scrollWidth;a.removeChild(b);return c},f=function(a){var b=a.length-e;a.trim().length>e&&!g(a)&&Array.prototype.slice.call(a).map(function(a,c){return c>e&&c<=b&&v.test(a)?"&shy;"+a:a});return a};return c.map(function(a){return f(a)}).join("")};return{truncate:function(){var e=a.innerHTML.trim(),l=a.textContent||"";e=c(e,u);a.appendChild(b);if(g(e))a.removeChild(b),a.innerHTML=e;else{var f=e.split(u);for(var q=1,h=f.length,d,k,n=0;q!==h;)if(d=Math.floor((h+
q)/2),k=f.slice(0,d).join("")+"&hellip;",g(k)){if(1>=h-d){for(n=d;0<n&&!v.test(f[n-1]);)n--;break}q=d}else h=d;f=0===n?void 0:f.slice(0,n).join("")+"&hellip;";f?(a.innerHTML=f,a.setAttribute("title",l)):(m["default"].log("Unable to successfully truncate line "+e,"ERROR"),a.removeChild(b))}}}}m["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else m["default"].log("Truncation element missing necessary line number data","ERROR")},H=function(a){a=a.getElementsByClassName("p13n-sc-truncate");
Array.prototype.slice.call(a).map(function(a){var b=G(a);b&&(b.truncate(),a.classList.add("p13n-sc-truncated"),a.classList.remove("p13n-sc-truncate"),a.className=a.className.replace(/p13n-sc-line-clamp-\d/g,""))})},I={initCarousel:function(a){return h.__awaiter(void 0,void 0,void 0,function(){var b,l,f,g,c,e,d;return h.__generator(this,function(m){switch(m.label){case 0:b=p["default"].cardRoot.classList.contains("p13n-sc-shoveler")?p["default"].cardRoot:p["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler")[0];
l=E["default"].setup(["getCarouselItems"]);if(!b)return[2];f=F["default"].getCarousel(y.unscope(b));g=D["default"].getCarousel(b);c=b.dataset||{};e=f.getAttr("name");d=function(){k["default"].loadDynamicImage("[data-name]='"+e+"' .p13n-sc-dynamic-image");H(b);null===a||void 0===a?void 0:a(b)};return[4,g.initialized];case 1:return m.sent(),k["default"].on("a:carousel:"+e+":change:pageSize",d),k["default"].on("a:carousel:"+e+":change:loading",d),k["default"].on("a:carousel:"+e+":change:animating",d),
k["default"].on("a:carousel:"+e+":change:fetchedItems",d),d(),g.attachRemoteOperation(function(a){var b=a.indexes;a=a.ids;return l.getCarouselItems(h.__assign(h.__assign({},c),{ids:a,indexes:b,offset:String(b[0]||0)}))}),[2]}})})}},J=function(a){return function(b){a.forEach(function(a){a(b)})}},r=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},K=function(a){var b=a.querySelector('[class*="dealsCardDealTimer"]');if(null!==b){var d=b.dataset.endtime;d&&setInterval(function(){a:{var a=
parseInt(d,10);var g=Date.now();if(g<=a){var c=null;var e=a-g;g=Math.floor(e/36E5);a=Math.floor(e/6E4%60);e=Math.floor(e/1E3%60);if(24<=g&&b.dataset.dayscountdowntoendtemplate&&(c=b.dataset.dayscountdowntoendtemplate,null!==c)){c=c.replace("${daysCount}",Math.floor(g/24).toString());b.innerText=c;break a}b.dataset.minutescountdowntoendtemplate&&b.dataset.hourscountdowntoendtemplate&&(c=0===g?b.dataset.minutescountdowntoendtemplate:b.dataset.hourscountdowntoendtemplate);null!==c&&(c=c.replace("_hours_",
r(g)),c=c.replace("_minutes_",r(a)),c=c.replace("_seconds_",r(e)),b.innerText=c)}else b.dataset.expiredstring&&(b.innerText=b.dataset.expiredstring)}},1E3)}},L=function(){var a,b=p["default"].cardRoot.getElementsByClassName("a-carousel-card");try{for(var d=h.__values(b),f=d.next();!f.done;f=d.next())K(f.value)}catch(c){var g={error:c}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(g)throw g.error;}}};t._operationNames=["getCarouselItems"];t.card=function(){return h.__awaiter(void 0,void 0,
void 0,function(){return h.__generator(this,function(a){switch(a.label){case 0:return[4,I.initCarousel(J([L]))];case 1:return a.sent(),[2]}})})}});
